name: Manual Scrap

on:
  workflow_dispatch:
  
jobs:
  update:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout Repo
      uses: actions/checkout@v2.4.2
    - name: Setup Python
      uses: actions/setup-python@v4.2.0
      with:
        python-version: 3.10.1
    - name: Install Python dependencies
      uses: py-actions/py-dependency-install@v3.0.0
    - name: Run the scrapper
      run: python scrapper.py 
    - name: Commit
      run: |
        set -e
        git config --global user.email "41898282+auto-scrape[bot]@users.noreply.github.com"
        git config --global user.name "Auto Scrape [BOT]"
        d="$(date --rfc-3339=s)"
        git add --all
        git commit --allow-empty -m "Auto Scrape [$d]"
        git push -f origin main
